<!doctype html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.lug.ustc.edu.cn/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css"><meta name="keywords" content="IPC,Unix,进程通信,C 语言,"><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.0"><meta name="description" content="讨论 Unix 下的 IPC （进程间通信机制）--- 管道 PIPE"><meta name="keywords" content="IPC,Unix,进程通信,C 语言"><meta property="og:type" content="article"><meta property="og:title" content="浅谈 IPC 的几种方式（一）"><meta property="og:url" content="https://jacksonlike.cn/Unix/PIPE/index.html"><meta property="og:site_name" content="Coding Runner"><meta property="og:description" content="讨论 Unix 下的 IPC （进程间通信机制）--- 管道 PIPE"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://jacksonlike.cn/images/background/barley.jpg"><meta property="og:image" content="https://jacksonlike.cn/images/ipc/1.png"><meta property="og:image" content="https://jacksonlike.cn/images/ipc/2.png"><meta property="og:image" content="https://jacksonlike.cn/images/ipc/3.png"><meta property="og:image" content="https://jacksonlike.cn/images/ipc/5.png"><meta property="og:image" content="https://jacksonlike.cn/images/ipc/4.png"><meta property="og:updated_time" content="2020-06-01T09:39:40.255Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="浅谈 IPC 的几种方式（一）"><meta name="twitter:description" content="讨论 Unix 下的 IPC （进程间通信机制）--- 管道 PIPE"><meta name="twitter:image" content="https://jacksonlike.cn/images/background/barley.jpg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",sidebar:{position:"right",display:"post"},fancybox:!0,motion:!0,duoshuo:{userId:"undefined",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://jacksonlike.cn/Unix/PIPE/"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><style>.pace .pace-progress{background:#1e92fb;height:3px}.pace .pace-progress-inner{box-shadow:0 0 10px #1e92fb,0 0 5px #1e92fb}.pace .pace-activity{border-top-color:#1e92fb;border-left-color:#1e92fb}</style><title> 浅谈 IPC 的几种方式（一） | Coding Runner</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b6e35907910d61915fbb881eec0582d4";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><div class="container one-collumn sidebar-position-right page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta custom-logo"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Coding Runner</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description"></h1></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="popup"><span class="search-icon fa fa-search"></span> <input type="text" id="local-search-input"><div id="local-search-result"></div> <span class="popup-btn-close">close</span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://jacksonlike.cn/Unix/PIPE/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="👻 杰克疯 👻"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Coding Runner"> <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="Coding Runner" src="/images/avatar.jpg"></span></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 浅谈 IPC 的几种方式（一）</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-21T15:24:20+00:00">2019-07-21</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Unix/" itemprop="url" rel="index"><span itemprop="name">Unix</span></a></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计</span> <span title="字数统计">1.7k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长</span> <span title="阅读时长">6</span></div><div class="post-description"> 讨论 Unix 下的 IPC （进程间通信机制）--- 管道 PIPE</div></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/background/barley.jpg" alt></p><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>学而时习之不亦说乎，进程间通信相关的知识其实在很久以前就学习过，这方面的知识大部分工作根本用不着，但是对自己理解高阶代码有很大好处，故而借这个周末又翻了翻 <a href="https://book.douban.com/subject/1788421" target="_blank" rel="noopener">APUE</a> 相关章节，以下复习笔记，和一些自己的总结和思考。</p><h3 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h3><p>进程之间交换信息常见的途径有如下几种:</p><ol><li>第一种通过 fork 生成子进程，父进程的所有信息，在子进程中都可以获取到，达到共享信息的目的，但是这种信息交换的方式对于没有亲属关系的进程之间是无效的。</li><li>第二种是通过约定，多个进程读写同一个文件的方式进行信息交换，这也是最容易被想到的方式。当程序及其简单的时候，这种方式实现起来非常简单倒是还有用武之地。但是代码量大起来，或者逻辑复杂之后，就显得比较低效，而且当不同进程同时读写文件的时候，容易发生混乱。</li><li>第三种就是今天要介绍的进程间通信 (InterProcess Communication, IPC)。常见的进程间通信方式包括如下几种，接下来逐一介绍。<ul><li><a href="#pipe">无名管道 PIPE</a></li><li><a href="#fifo">有名管道 FIFO</a></li><li><a href="#signal">信号 signal</a></li><li><a href="#msg">消息队列 MSG</a></li><li><a href="#shm">共享内存 SHM</a></li><li><a href="#sem">信号量 SEM</a></li><li><a href="#socket">套接字 Socket</a></li></ul></li></ol><span id="pipe"><h3 id="无名管道-PIPE"><a href="#无名管道-PIPE" class="headerlink" title="无名管道 PIPE"></a>无名管道 PIPE</h3><p>管道，命名就很形象，可以想象成一根水管连接两个进程，一边进水一边出水。</p><h4 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h4><ul><li>没有名字，无法使用 open() 进行打开</li><li>因为第一个特点，没有名字，不能 open，所以只能用于有共同祖先进程的进程之间通信</li><li><a href="https://zh.wikipedia.org/w/index.php?title=%E9%9B%99%E5%B7%A5&oldformat=true&variant=zh-hans#%E5%8D%8A%E9%9B%99%E5%B7%A5" target="_blank" rel="noopener">半双工</a>的工作方式，这一点也类似于真实的管道，读端写端分开</li><li>当要写入的数据量大于 <code>PIPE_BUF</code> （PIPE_BUF 的大小为4096字节）时，将不能保证写入的原子性，所以一般只使用于一对一的简单通信</li></ul><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>管道是通过 <code>pipe</code> 函数创建的</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pipe</span><span class="params">(<span class="keyword">int</span> fd[<span class="number">2</span>])</span></span>;  <span class="comment">// 创建成功返回 0，否则为 -1</span></span><br></pre></td></tr></table></figure><p>函数返回成功后，fd[0] 成为读端，fd[1] 成为写端。fd[1] 读取 fd[0] 的输入。实际上 PIPE 并没有限制一定在两个不同的进程间使用，但是单个进程间的管道没有任何作用，也就不做讨论。下图截自 <a href="https://book.douban.com/subject/1788421" target="_blank" rel="noopener">APUE</a> 描述了管道的一般工作模型。</p><p><img src="/images/ipc/1.png" alt></p><p>首先进程调用 <code>pipe</code> 函数，接着调用 <code>fork</code> 函数创建子进程，所以产生的子进程和父进程一样都能获取 PIPE 读端和写端。紧接着各自关闭所不需要的文件 ID，上图表示的是父进程传输信息到子进程，所以父进程关闭了读端，子进程关闭了写端。因为管道的半双工的特点，所以一般不会用一个管道进行双向的信息互换，更常见的是创建两个管道进行信息互换（如协同进程）。</p><p>简单的 demo</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> fd[<span class="number">2</span>];</span><br><span class="line">	<span class="keyword">if</span> (<span class="number">-1</span> == pipe(fd)) &#123;</span><br><span class="line">		perror(<span class="string">"pipe error"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">pid_t</span> pid = fork();</span><br><span class="line">	<span class="keyword">if</span> (pid &gt; <span class="number">0</span>) &#123;             <span class="comment">/* 父进程 */</span></span><br><span class="line">		close(fd[<span class="number">0</span>]);</span><br><span class="line">		<span class="keyword">char</span> *s = <span class="string">"hello, i am your father!"</span>;</span><br><span class="line">		<span class="comment">// sleep(10);</span></span><br><span class="line">		write(fd[<span class="number">1</span>], s, <span class="built_in">strlen</span>(s));</span><br><span class="line">		close(fd[<span class="number">1</span>]);</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>) &#123;       <span class="comment">/* 子进程 */</span></span><br><span class="line">		close(fd[<span class="number">1</span>]);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">char</span> buf[<span class="number">30</span>];</span><br><span class="line">		bzero(buf, <span class="number">30</span>);</span><br><span class="line">		read(fd[<span class="number">0</span>], buf, <span class="number">30</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"read from father:%s\n"</span>, buf);</span><br><span class="line">		</span><br><span class="line">		close(fd[<span class="number">0</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		perror(<span class="string">"fork error"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">/**************************************************</span></span><br><span class="line"><span class="comment"> * ouput：read from father:hello, i am your father!</span></span><br><span class="line"><span class="comment"> ****************************************************/</span></span><br></pre></td></tr></table></figure><p><strong>注</strong>，PIPE 是一种特殊的文件，也可以使用一般的文件 IO 函数进行读写，但是同 FIFO、socket 一样是不能使用 <code>lseek</code> 之类的函数进行定位，因为它们不同于普通文件存在于硬盘、Flash 等块设备上，它们只存在于内存，由内核维护。</p><p>如果想查看进程的管道，可以将上述示例代码，sleep 取消注释再运行，可以看到以下结果。</p><p><img src="/images/ipc/2.png" alt></p><h4 id="shell-中的管道"><a href="#shell-中的管道" class="headerlink" title="shell 中的管道"></a>shell 中的管道</h4><p>实际上有了以上的基础之后，shell中的管道倒是很容易理解。</p><p>下图说明了如何通过管道连接 <code>find</code>、<code>grep</code> 和 <code>wc</code> 命令，将 <code>find</code> 命令的标准输出重定向（通过 <code>dup2</code> 接口 ）到管道的写端，而将 <code>grep</code> 命令的标准输入指向管道的读端。<code>grep</code> 和 <code>wc</code> 之间也是同理。</p><p><img src="/images/ipc/3.png" alt></p><span id="fifo"><h3 id="有名管道-FIFO"><a href="#有名管道-FIFO" class="headerlink" title="有名管道 FIFO"></a>有名管道 FIFO</h3><p> <code>PIPE</code> 最大的劣势就是只能使用在有共同祖先的进程间，应用场景单一，性能较弱，限制条件又太多。所以我们还需要一种更强大的管道 <code>FIFO</code> 。</p><h4 id="特征-1"><a href="#特征-1" class="headerlink" title="特征"></a>特征</h4><ul><li>有名字，存在于普通的文件系统中，所以任何有权限的进程都可以通过文件 IO 函数读写 <code>FIFO</code></li><li>具有写入原子性，多写者同时进行操作不会出现数据混乱</li><li>First In First Out 原则，最先写入就会最先被读出</li></ul><h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># read.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FIFO <span class="meta-string">"/tmp/fifotest"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (access(FIFO, F_OK)) &#123;</span><br><span class="line">		mkfifo(FIFO, <span class="number">0644</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> fifo = open(FIFO, O_RDONLY); <span class="comment">// 只读的方式打开FIFO</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">char</span> msg[<span class="number">20</span>];</span><br><span class="line">	<span class="built_in">memset</span>(msg, <span class="number">0</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">	read(fifo, msg, <span class="number">20</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"read from FIFO: %s\n"</span>, msg);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta"># write.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FIFO <span class="meta-string">"/tmp/fifotest"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (access(FIFO, F_OK)) &#123;</span><br><span class="line">		mkfifo(FIFO, <span class="number">0644</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> fifo = open(FIFO, O_WRONLY); <span class="comment">// 只写的方式打开FIFO</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">char</span> msg[<span class="number">20</span>];</span><br><span class="line">	<span class="built_in">memset</span>(msg, <span class="number">0</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">	fgets(msg, <span class="number">20</span>, <span class="built_in">stdin</span>);</span><br><span class="line">	<span class="keyword">int</span> n = write(fifo, msg, <span class="built_in">strlen</span>(msg));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"sebded %d bytes to FIFO\n"</span>, n);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这是完整源码<a href="https://github.com/Jacksonlike/blog_code/tree/master/IPC" target="_blank" rel="noopener">地址</a>。代码执行效果如下。<br><img src="/images/ipc/5.png" alt></p><p>示例代码非常的简单，不过有以下几点进行说明：</p><ul><li><p>read 和 write 是两个同时独立运行的进程。</p></li><li><p>刚开始运行 read 进程而还没运行 write 进程时，或者是运行了 write 进程且 read 进程还没有运行时，<code>open</code> 函数会被阻塞，因为管道文件（包括 <code>FIFO</code>、<code>PIPE</code> 和 <code>socket</code> ）不可以只有读端或者只有写端被打开。</p></li><li><p>除了打开管道的时候可能发生阻塞，在进行读写操作的时候也可能会发生阻塞，具体规则如下表所示。</p><p><img src="/images/ipc/4.png" alt></p></li><li><p>当调用 <code>open</code> （或者调用 <code>fcntl</code> ）时，指定 <code>O_NONBLOCK</code> 的标志，则管道不会阻塞。具体规则与上述有所区别，如果需要可以查看 <a href="[https://github.com/lancetw/ebook-1/blob/master/01_programming/UNIX%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%8D%B72%EF%BC%9A%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%88%E7%AC%AC2%E7%89%88%EF%BC%89.pdf](https://github.com/lancetw/ebook-1/blob/master/01_programming/UNIX网络编程卷2：进程间通信（第2版）.pdf)">UNIX网络编程卷2 第四章</a> ，书中有详细描述。</p></li></ul><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://www.ibm.com/developerworks/cn/aix/library/au-spunix_pipeviewer/index.html" target="_blank" rel="noopener">对话 UNIX 探索管道</a><br><a href="https://book.douban.com/subject/1788421" target="_blank" rel="noopener">Unix 环境高级编程</a><br><a href="https:s//book.douban.com/subject/4118577/" target="_blank" rel="noopener">UNIX网络编程 卷2</a></p></span></span></div><div></div><div class="post-tags"> <a href="/tags/IPC/" rel="tag"># IPC</a> <a href="/tags/Unix/" rel="tag"># Unix</a> <a href="/tags/进程通信/" rel="tag"># 进程通信</a> <a href="/tags/C-语言/" rel="tag"># C 语言</a></div><div></div><footer class="post-footer"><div><ul class="post-copyright"><li class="post-copyright-link"> <strong>本文作者：</strong> <a href="/" title="欢迎访问 👻 杰克疯 👻 的个人博客">👻 杰克疯 👻</a></li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://jacksonlike.cn/Unix/PIPE/" title="浅谈 IPC 的几种方式（一）">https://jacksonlike.cn/Unix/PIPE/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文由 👻 杰克疯 👻 原创，采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="license" target="_blank">CC BY-NC-SA 4.0，</a> 转载请保留以上声明信息！</li></ul></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/Life/helloworld/" rel="next" title="Hello World"><i class="fa fa-chevron-left"></i> Hello World</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/Python/metaclass/" rel="prev" title="Python 元类(Metaclass)">Python 元类(Metaclass)<i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC80NDE5Ny8yMDczMA=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview"> 站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="👻 杰克疯 👻"><p class="site-author-name" itemprop="name">👻 杰克疯 👻</p><p class="site-description motion-element" itemprop="description">一直在学着写代码的程序员 🥤🥤🥤</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives"><span class="site-state-item-count">6</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags"><span class="site-state-item-count">16</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Jacksonlike" target="_blank" title="GitHub"><i class="fa fa-fw fa-github-alt"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://note.jacksonlike.cn/" target="_blank" title="Note"><i class="fa fa-fw fa-leanpub"></i> Note</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#进程间通信"><span class="nav-number">2.</span> <span class="nav-text">进程间通信</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#无名管道-PIPE"><span class="nav-number">3.</span> <span class="nav-text">无名管道 PIPE</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特征"><span class="nav-number">3.1.</span> <span class="nav-text">特征</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用"><span class="nav-number">3.2.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#shell-中的管道"><span class="nav-number">3.3.</span> <span class="nav-text">shell 中的管道</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有名管道-FIFO"><span class="nav-number">4.</span> <span class="nav-text">有名管道 FIFO</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特征-1"><span class="nav-number">4.1.</span> <span class="nav-text">特征</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-1"><span class="nav-number">4.2.</span> <span class="nav-text">使用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考文档"><span class="nav-number">5.</span> <span class="nav-text">参考文档</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">👻 杰克疯 👻</span></div><div class="powered-by"> 由 <a class="theme-link" href="https://hexo.io" rel="external nofollow">Hexo</a> 强力驱动</div><div class="theme-info"> 主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow">NexT.Mist</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><script type="text/javascript">var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path;function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var searchFunc=function(e,c,n){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),a=document.getElementById(c),r=document.getElementById(n);a.addEventListener("input",function(){var u=0,d='<ul class="search-result-list">',f=this.value.trim().toLowerCase().split(/[\s\-]+/);r.innerHTML="",1<this.value.trim().length&&t.forEach(function(e){var a=!1,r=e.title.trim().toLowerCase(),c=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),t=decodeURIComponent(e.url),n=-1,s=-1,o=-1;if(""!=r&&f.forEach(function(e,t){n=r.indexOf(e),s=c.indexOf(e),(0<=n||0<=s)&&(a=!0,0==t&&(o=s))}),a){u+=1,d+="<li><a href='"+t+"' class='search-result-title'>"+r+"</a>";var i=e.content.trim().replace(/<[^>]+>/g,"");if(0<=o){var l=o-20,p=o+80;l<0&&(l=0),0==l&&(p=50),p>i.length&&(p=i.length);var h=i.substring(l,p);f.forEach(function(e){var t=new RegExp(e,"gi");h=h.replace(t,'<b class="search-keyword">'+e+"</b>")}),d+='<p class="search-result">'+h+"...</p>"}d+="</li>"}}),d+="</ul>",0==u&&(d='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==f&&(d='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),r.innerHTML=d}),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script type="text/javascript" src="/js/src/love.js"></script></body></html>